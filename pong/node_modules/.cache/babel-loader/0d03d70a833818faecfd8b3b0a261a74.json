{"ast":null,"code":"import Ball from './Ball';\nimport Player from './Player';\n\nclass Game {\n  constructor(canvas, getPoints, isGameOver, gameType) {\n    //singleton\n    if (Game.instance) {\n      return Game.instance;\n    }\n\n    Game.instance = this;\n    this.isRunning = false;\n    this.gameType = gameType;\n    this.p1Points = 0;\n    this.p2Points = 0;\n    this.getPoints = getPoints;\n    this.isGameOver = isGameOver; //field\n\n    this.canvas = canvas;\n    this.ctxt = this.canvas.getContext('2d');\n    this.canvas.width = document.body.clientWidth * 0.7;\n    this.canvas.height = window.innerHeight * 0.7;\n    this.halfLinePos = this.canvas.width / 2;\n    window.addEventListener('resize', () => {\n      this.canvas.width = document.body.clientWidth * 0.7;\n      this.canvas.height = window.innerHeight * 0.7;\n    });\n  }\n\n  start() {\n    this.ball = new Ball(this.canvas);\n\n    if (this.gameType === 1) {\n      this.user = new Player('P1', this.canvas);\n      this.pc = new Player('PC', this.canvas, this.ball);\n    } else if (this.gameType === 2) {\n      this.user = new Player('P1', this.canvas);\n      this.pc = new Player('P2', this.canvas);\n    } else if (this.gameType === 3) {\n      this.user = new Player('P1', this.canvas);\n      this.pc = new Player('P2', this.canvas);\n    }\n\n    this.isRunning = true;\n    window.requestAnimationFrame(this.drawGame.bind(this));\n  }\n\n  stop() {\n    this.isRunning = false;\n  }\n\n  checkTouchRightPlayer() {\n    let userX = this.canvas.width - this.user.playerWidth;\n    let touchX = this.ball.x + this.ball.raduis > userX;\n    let inYTop = this.ball.y - this.ball.raduis > this.user.y;\n    let inYBottom = this.ball.y + this.ball.raduis < this.user.y + this.user.playerSize;\n\n    if (touchX && inYBottom && inYTop) {\n      return true;\n    }\n\n    return false;\n  }\n\n  checkTouchLeftlayer() {\n    let pcX = this.user.playerWidth;\n    let touchX = this.ball.x - this.ball.raduis < pcX;\n    let inYTop = this.ball.y - this.ball.raduis > this.pc.y;\n    let inYBottom = this.ball.y + this.ball.raduis < this.pc.y + this.pc.playerSize;\n\n    if (touchX && inYBottom && inYTop) {\n      return true;\n    }\n\n    return false;\n  }\n\n  resetMiniGame() {\n    this.ball.x = this.canvas.width / 2;\n    this.ball.y = this.canvas.height / 2;\n    this.ball.xDirection = -1;\n    this.ball.yDirection = 1;\n    this.ball.speed = 4;\n  }\n\n  checkMiniGameEnd() {\n    //check left & right boundries ( win /lose )\n    let rightBorder = this.canvas.width - this.ball.raduis;\n    let leftBorder = this.ball.raduis;\n\n    if (this.ball.x > rightBorder) {\n      this.p1Points++;\n      this.getPoints(this.p1Points, 'Left');\n      this.resetMiniGame();\n      console.log(this.p1Points);\n    }\n\n    if (this.ball.x < leftBorder) {\n      this.p2Points++;\n      this.getPoints(this.p2Points, 'Right');\n      this.resetMiniGame();\n      console.log(this.p2Points);\n    }\n  }\n\n  checkGameOver() {\n    if (this.p1Points === 3) {\n      return 'Left';\n    } else if (this.p2Points === 3) {\n      return 'Right';\n    }\n  }\n\n  drawGame() {\n    //draw field\n    this.ctxt.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.ctxt.fillStyle = 'black';\n    this.ctxt.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    this.ctxt.fillStyle = 'white';\n    this.ctxt.fillRect(this.halfLinePos, 0, 7, this.canvas.height); //check if ball hit right player\n\n    if (this.checkTouchRightPlayer()) {\n      this.ball.speed += 0.3;\n      this.ball.xDirection = -this.ball.xDirection;\n    } //check if ball hit left player\n\n\n    if (this.checkTouchLeftlayer()) {\n      this.ball.speed += 0.3;\n      this.ball.xDirection = -this.ball.xDirection;\n    }\n\n    this.ball.drawBall();\n    this.pc.drawPlayer();\n    this.user.drawPlayer(); //check minigame\n\n    this.checkMiniGameEnd(); //check gameOver\n\n    if (this.checkGameOver() === 'Left') {\n      this.isGameOver('Left'); // document.removeChild(this.canvas);\n\n      console.log('Left end');\n    } else if (this.checkGameOver() === 'Right') {\n      this.isGameOver('Right'); // document.removeChild(this.canvas);\n\n      console.log('Right end');\n    }\n\n    if (this.isRunning === true) {\n      window.requestAnimationFrame(this.drawGame.bind(this));\n    }\n  }\n\n}\n\nexport default Game;","map":{"version":3,"sources":["C:/Users/Oded/Desktop/Game/pong/src/game/Game.js"],"names":["Ball","Player","Game","constructor","canvas","getPoints","isGameOver","gameType","instance","isRunning","p1Points","p2Points","ctxt","getContext","width","document","body","clientWidth","height","window","innerHeight","halfLinePos","addEventListener","start","ball","user","pc","requestAnimationFrame","drawGame","bind","stop","checkTouchRightPlayer","userX","playerWidth","touchX","x","raduis","inYTop","y","inYBottom","playerSize","checkTouchLeftlayer","pcX","resetMiniGame","xDirection","yDirection","speed","checkMiniGameEnd","rightBorder","leftBorder","console","log","checkGameOver","clearRect","fillStyle","fillRect","drawBall","drawPlayer"],"mappings":"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","sourcesContent":["import Ball from './Ball';\r\nimport Player from './Player';\r\n\r\nclass Game {\r\n    constructor(canvas, getPoints, isGameOver, gameType) {\r\n        //singleton\r\n        if(Game.instance) {\r\n            return Game.instance;\r\n        }\r\n        Game.instance = this;\r\n        this.isRunning = false;\r\n        this.gameType = gameType;\r\n\r\n        this.p1Points = 0;\r\n        this.p2Points = 0;\r\n        \r\n        this.getPoints = getPoints;\r\n        this.isGameOver = isGameOver;\r\n\r\n        //field\r\n        this.canvas = canvas;\r\n        this.ctxt = this.canvas.getContext('2d');\r\n        this.canvas.width = document.body.clientWidth * 0.7;\r\n        this.canvas.height = window.innerHeight * 0.7;\r\n        this.halfLinePos = this.canvas.width / 2;\r\n        \r\n        window.addEventListener('resize', () => {\r\n            this.canvas.width = document.body.clientWidth*0.7;\r\n            this.canvas.height = (window.innerHeight )*0.7;\r\n            }\r\n        );\r\n    }\r\n    \r\n    start() {\r\n        this.ball = new Ball(this.canvas);\r\n        if (this.gameType === 1) {\r\n            this.user = new Player('P1', this.canvas);\r\n            this.pc = new Player('PC', this.canvas, this.ball);\r\n        }else if (this.gameType === 2) {\r\n            this.user = new Player('P1', this.canvas);\r\n            this.pc = new Player('P2', this.canvas);\r\n        }else if (this.gameType === 3) {\r\n            this.user = new Player('P1', this.canvas);\r\n            this.pc = new Player('P2', this.canvas);\r\n        }\r\n        this.isRunning = true;\r\n        window.requestAnimationFrame(this.drawGame.bind(this));\r\n    }\r\n    \r\n    stop() {\r\n        this.isRunning = false;\r\n    }\r\n\r\n    checkTouchRightPlayer(){\r\n        let userX = this.canvas.width - this.user.playerWidth;\r\n        let touchX = (this.ball.x + this.ball.raduis > userX);\r\n        let inYTop = (this.ball.y - this.ball.raduis > this.user.y);\r\n        let inYBottom = (this.ball.y + this.ball.raduis < this.user.y + this.user.playerSize);\r\n        \r\n        if (touchX && inYBottom && inYTop){\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    checkTouchLeftlayer(){\r\n        let pcX = this.user.playerWidth;\r\n        let touchX = (this.ball.x - this.ball.raduis < pcX);\r\n        let inYTop = (this.ball.y - this.ball.raduis > this.pc.y);\r\n        let inYBottom = (this.ball.y + this.ball.raduis< this.pc.y + this.pc.playerSize);\r\n\r\n        if (touchX && inYBottom && inYTop){\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    resetMiniGame(){\r\n        this.ball.x = this.canvas.width / 2;\r\n        this.ball.y = this.canvas.height / 2;\r\n        this.ball.xDirection = -1;\r\n        this.ball.yDirection = 1;\r\n        this.ball.speed = 4;\r\n    }\r\n\r\n    checkMiniGameEnd(){\r\n        //check left & right boundries ( win /lose )\r\n        let rightBorder = this.canvas.width - this.ball.raduis;\r\n        let leftBorder = this.ball.raduis;\r\n        if (this.ball.x > rightBorder){\r\n            this.p1Points++;\r\n            this.getPoints(this.p1Points, 'Left');\r\n            this.resetMiniGame();\r\n            console.log(this.p1Points);\r\n        }\r\n        if(this.ball.x < leftBorder){\r\n            this.p2Points++;\r\n            this.getPoints(this.p2Points, 'Right');\r\n            this.resetMiniGame();\r\n            console.log(this.p2Points);\r\n        }\r\n    }\r\n    \r\n    checkGameOver(){\r\n        if (this.p1Points === 3) {\r\n            return('Left');\r\n        }else if (this.p2Points === 3) {\r\n            return('Right');\r\n        }\r\n    }\r\n\r\n    drawGame(){\r\n        //draw field\r\n        this.ctxt.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctxt.fillStyle = 'black';\r\n        this.ctxt.fillRect(0,0, this.canvas.width, this.canvas.height);\r\n        this.ctxt.fillStyle = 'white';\r\n        this.ctxt.fillRect(this.halfLinePos, 0, 7, this.canvas.height);\r\n        \r\n        //check if ball hit right player\r\n        if (this.checkTouchRightPlayer()){\r\n            this.ball.speed += 0.3;\r\n            this.ball.xDirection = -this.ball.xDirection;\r\n        }\r\n        \r\n        //check if ball hit left player\r\n        if (this.checkTouchLeftlayer()){\r\n            this.ball.speed += 0.3;\r\n            this.ball.xDirection = -this.ball.xDirection;\r\n        }\r\n        \r\n        this.ball.drawBall();\r\n        this.pc.drawPlayer();\r\n        this.user.drawPlayer();\r\n        \r\n        //check minigame\r\n        this.checkMiniGameEnd();\r\n        \r\n        //check gameOver\r\n        if (this.checkGameOver() === 'Left'){\r\n            this.isGameOver('Left');\r\n            // document.removeChild(this.canvas);\r\n            console.log('Left end');\r\n        }else if (this.checkGameOver() === 'Right') {\r\n            this.isGameOver('Right');\r\n            // document.removeChild(this.canvas);\r\n            console.log('Right end');\r\n        }\r\n        if (this.isRunning === true){\r\n            window.requestAnimationFrame(this.drawGame.bind(this));\r\n        }\r\n            \r\n    }\r\n    \r\n}\r\nexport default Game;\r\n\r\n"]},"metadata":{},"sourceType":"module"}